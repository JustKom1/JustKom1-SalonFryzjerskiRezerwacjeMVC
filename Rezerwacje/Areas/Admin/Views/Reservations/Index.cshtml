@using Rezerwacje.Helpers;

@model IEnumerable<Rezerwacje.Areas.Admin.Models.AdminReservationRowVm>

@{
    ViewData["Title"] = "Rezerwacje do zatwierdzenia";
}

<main class="container">
    <section class="panel">
        <header class="panel-header">
            <h2 class="section-title">Rezerwacje do zatwierdzenia</h2>
            <p class="form-hint">Zatwierdź lub odrzuć rezerwacje użytkowników.</p>
        </header>

        @if (TempData["Success"] != null)
        {
            <div class="alert alert-success">@TempData["Success"]</div>
        }

        @if (!Model.Any())
        {
            <p>Brak rezerwacji oczekujących.</p>
        }
        else
        {
            <table class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Użytkownik</th>
                        <th>Usługa</th>
                        <th>Termin</th>
                        <th>Czas trwania</th>
                        <th>Status</th>
                        <th>Akcje</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var r in Model)
                    {
                        <tr>
                            <td>@r.Id</td>
                            <td>@(r.UserEmail ?? "-")</td>
                            <td>@(r.ServiceName ?? "-")</td>
                            <td>@(r.Date?.ToString("yyyy-MM-dd HH:mm") ?? "-")</td>
                            <td>@StatusHelper.Badge(@r.Status)</td>
                            <td>
                                <form asp-area="Admin" asp-controller="Reservations" asp-action="Approve" asp-route-id="@r.Id" method="post" style="display:inline;">
                                    @Html.AntiForgeryToken()
                                    <button class="btn btn-primary" type="submit">Zatwierdź</button>
                                </form>

                                <form asp-area="Admin" asp-controller="Reservations" asp-action="Reject" asp-route-id="@r.Id" method="post" style="display:inline; margin-left:8px;">
                                    @Html.AntiForgeryToken()
                                    <button class="btn btn-danger" type="submit">Odrzuć</button>
                                </form>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </section>
</main>
